(()=>{(()=>{function i(){let t=new Date,e=new Date(t);return e.setFullYear(t.getFullYear()-18),e.toISOString().split("T")[0]}function g(t){let e=t.target.value.replace(/\D/g,"").slice(0,11),n="";e.length<=2?n=e:e.length<=6?n=`(${e.slice(0,2)}) ${e.slice(2)}`:e.length<=10?n=`(${e.slice(0,2)}) ${e.slice(2,6)}-${e.slice(6)}`:n=`(${e.slice(0,2)}) ${e.slice(2,7)}-${e.slice(7)}`,t.target.value=n}function f(t){let e=t.target.value.replace(/\D/g,"").slice(0,8),n="";e.length<=5?n=e:n=`${e.slice(0,5)}-${e.slice(5)}`,t.target.value=n}function v(t){let e=t.target.value.replace(/\D/g,"").slice(0,11),n="";e.length<=3?n=e:e.length<=6?n=`${e.slice(0,3)}.${e.slice(3)}`:e.length<=9?n=`${e.slice(0,3)}.${e.slice(3,6)}.${e.slice(6)}`:n=`${e.slice(0,3)}.${e.slice(3,6)}.${e.slice(6,9)}-${e.slice(9)}`,t.target.value=n}function a(t,e){let n=document.getElementById("toast-container");if(!n)return;let o=document.createElement("div");o.className=`toast toast-${e}`;let r=e==="success"?'<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z" fill="currentColor"/></svg>':'<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z" fill="currentColor"/></svg>';o.innerHTML=`
    <div class="toast-icon">${r}</div>
    <div class="toast-message">${t}</div>
    <button class="toast-close" aria-label="Fechar">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" fill="currentColor"/>
      </svg>
    </button>
  `;let l=o.querySelector(".toast-close");l.addEventListener("click",()=>{c(o)}),n.appendChild(o),l.focus(),setTimeout(()=>{c(o)},5e3)}function c(t){t.classList.add("hiding"),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},300)}function p(){let t=document.querySelector(".header"),e=0;(window.pageYOffset||document.documentElement.scrollTop)>100?t.dataset.active="true":t.dataset.active="false",window.addEventListener("scroll",function(){let n=window.pageYOffset||document.documentElement.scrollTop;n>100?t.dataset.active="true":t.dataset.active="false",e=n})}function h(){let t=document.body,e=document.getElementById("nav-menu-button"),n=document.getElementById("nav-menu-drawer"),o=document.getElementById("nav-menu-drawer-backdrop");e.addEventListener("click",function(){t.classList.toggle("no-scroll");let r=n.dataset.active==="true";n.dataset.active=r?"false":"true"}),o.addEventListener("click",function(){t.classList.toggle("no-scroll");let r=n.dataset.active==="true";n.dataset.active=r?"false":"true"})}function E(){let t=document.getElementById("nav-dropdown-toggle-mobile");t&&t.addEventListener("click",function(){let e=document.getElementById("nav-dropdown-mobile");if(e){e.classList.toggle("active");let n=e.querySelectorAll(".nav-dropdown-item");e.classList.contains("active")?n.forEach(o=>{o.setAttribute("tabindex","0")}):n.forEach(o=>{o.setAttribute("tabindex","-1")})}})}document.addEventListener("DOMContentLoaded",function(){p(),h(),E()});var u="registered_volunteers";function w(t){let e=localStorage.getItem(t);if(!e)return null;try{return JSON.parse(e)}catch(n){return console.error("Error parsing value from localStorage:",n),null}}function s(){return w(u)||[]}function L(t){let e=s(),n={name:t.fullName,avatar:`https://ui-avatars.com/api/?name=${encodeURIComponent(t.fullName)}&background=219d80&color=fff&size=128`,email:t.email,phone:t.phone,cpf:t.cpf,birthDate:t.birthDate,street:t.street,cep:t.cep,city:t.city,state:t.state,registeredAt:new Date().toISOString()};e.push(n);try{return localStorage.setItem(u,JSON.stringify(e)),!0}catch(o){return console.error("Error saving registered volunteer to localStorage:",o),!1}}function d(t){return t.replace(/\D/g,"")}function x(t){let e=s(),n=d(t);return e.some(o=>d(o.cpf)===n)}function y(t){let e=s(),n=t.toLowerCase().trim();return e.some(o=>o.email.toLowerCase().trim()===n)}function m(t){return t.replace(/\D/g,"")}function $(t){let e=s(),n=m(t);return n?e.some(o=>{let r=m(o.phone);return r&&r===n}):!1}function b(t){t.preventDefault();let e=t.target,n=new FormData(e),o=n.get("state");if(o.toLowerCase()!=="s\xE3o paulo"&&o.toLowerCase()!=="sp"&&o.toLowerCase()!=="sao paulo"){a("Desculpe, mas nosso servi\xE7o est\xE1 dispon\xEDvel apenas para o estado de S\xE3o Paulo.","error");return}let r={fullName:n.get("fullName"),email:n.get("email"),phone:n.get("phone"),cpf:n.get("cpf"),birthDate:n.get("birthDate"),street:n.get("street"),cep:n.get("cep"),city:n.get("city"),state:n.get("state")};if(x(r.cpf)){a("Este CPF j\xE1 est\xE1 cadastrado. Por favor, use outro CPF.","error");return}if(y(r.email)){a("Este email j\xE1 est\xE1 cadastrado. Por favor, use outro email.","error");return}if($(r.phone)){a("Este telefone j\xE1 est\xE1 cadastrado. Por favor, use outro telefone.","error");return}if(L(r)){a("Cadastro realizado com sucesso! Entraremos em contato em breve. J\xE1 pode ver sua inscri\xE7\xE3o na p\xE1gina de volunt\xE1rios.","success"),e.reset();let l=document.getElementById("birthDate");l&&(l.value=i())}else a("Erro ao salvar o cadastro. Tente novamente.","error")}document.addEventListener("DOMContentLoaded",()=>{let t=document.getElementById("phone");t?t.addEventListener("input",g):console.error("Phone input not found");let e=document.getElementById("birthDate");e?(e.max=i(),e.value=i()):console.error("Birth date input not found");let n=document.getElementById("cpf");n?n.addEventListener("input",v):console.error("CPF input not found");let o=document.getElementById("cep");o?o.addEventListener("input",f):console.error("CEP input not found");let r=document.querySelector(".register--form");r&&r.addEventListener("submit",b)})})();})();
